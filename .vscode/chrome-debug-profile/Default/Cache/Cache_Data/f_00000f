import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/MovieDetails/MovieActions.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=fe8bc9ef"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=fe8bc9ef"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useEffect = __vite__cjsImport3_react["useEffect"]; const useMemo = __vite__cjsImport3_react["useMemo"]; const useState = __vite__cjsImport3_react["useState"];
const STORAGE_KEY_PREFIX = "movie_feedback_";
const MovieActions = ({
  movie,
  onWatchTrailer,
  // onAddToWatchlist,
  onLike,
  onDislike
}) => {
  _s();
  const storageKey = useMemo(() => `${STORAGE_KEY_PREFIX}${movie?.id ?? "unknown"}`, [movie?.id]);
  const [feedback, setFeedback] = useState(null);
  const [toast, setToast] = useState(null);
  useEffect(() => {
    try {
      const saved = localStorage.getItem(storageKey);
      if (saved === "like" || saved === "dislike") {
        setFeedback(saved);
      }
    } catch {
    }
  }, [storageKey]);
  const persist = (value) => {
    try {
      if (value) localStorage.setItem(storageKey, value);
      else
        localStorage.removeItem(storageKey);
    } catch {
    }
  };
  const showToast = (message) => {
    setToast(message);
    window.setTimeout(() => setToast(null), 1600);
  };
  const handleLike = () => {
    if (feedback === "like") {
      setFeedback(null);
      persist(null);
      showToast("Removed like");
      return;
    }
    setFeedback("like");
    persist("like");
    showToast("Liked");
    onLike?.();
  };
  const handleDislike = () => {
    if (feedback === "dislike") {
      setFeedback(null);
      persist(null);
      showToast("Removed dislike");
      return;
    }
    setFeedback("dislike");
    persist("dislike");
    showToast("Disliked");
    onDislike?.();
  };
  const likeClasses = `font-semibold py-2 px-4 border rounded transition-colors flex items-center ${feedback === "like" ? "bg-green-600 border-green-600 text-white" : "bg-transparent border-green-600 text-white hover:bg-green-700 hover:text-white hover:border-transparent"}`;
  const dislikeClasses = `font-semibold py-2 px-4 border rounded transition-colors flex items-center ${feedback === "dislike" ? "bg-red-600 border-red-600 text-white" : "bg-transparent border-red-600 text-white hover:bg-red-700 hover:text-white hover:border-transparent"}`;
  return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col gap-2 mb-2", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex flex-wrap gap-2", children: [
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: onWatchTrailer,
          className: "bg-transparent hover:bg-blue-700 text-white font-semibold hover:text-white py-2 px-4 border border-blue-600 hover:border-transparent rounded transition-colors",
          children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center", children: [
            /* @__PURE__ */ jsxDEV("svg", { xmlns: "http://www.w3.org/2000/svg", className: "w-4 h-4 me-2", viewBox: "0 0 20 20", fill: "currentColor", children: /* @__PURE__ */ jsxDEV("path", { fillRule: "evenodd", d: "M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z", clipRule: "evenodd" }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 121,
              columnNumber: 15
            }, this) }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 120,
              columnNumber: 13
            }, this),
            "Trailer"
          ] }, void 0, true, {
            fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
            lineNumber: 119,
            columnNumber: 11
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
          lineNumber: 115,
          columnNumber: 9
        },
        this
      ),
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleLike,
          className: likeClasses,
          "aria-pressed": feedback === "like",
          title: feedback === "like" ? "You liked this" : "Like this movie",
          children: [
            /* @__PURE__ */ jsxDEV("svg", { xmlns: "http://www.w3.org/2000/svg", className: "w-4 h-4 me-2", viewBox: "0 0 20 20", fill: "currentColor", children: /* @__PURE__ */ jsxDEV("path", { d: "M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 135,
              columnNumber: 13
            }, this) }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 134,
              columnNumber: 11
            }, this),
            feedback === "like" ? "Liked" : "Like"
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
          lineNumber: 128,
          columnNumber: 9
        },
        this
      ),
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: handleDislike,
          className: dislikeClasses,
          "aria-pressed": feedback === "dislike",
          title: feedback === "dislike" ? "You disliked this" : "Dislike this movie",
          children: [
            /* @__PURE__ */ jsxDEV("svg", { xmlns: "http://www.w3.org/2000/svg", className: "w-4 h-4 me-2", viewBox: "0 0 20 20", fill: "currentColor", children: /* @__PURE__ */ jsxDEV("path", { d: "M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 148,
              columnNumber: 13
            }, this) }, void 0, false, {
              fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
              lineNumber: 147,
              columnNumber: 11
            }, this),
            feedback === "dislike" ? "Disliked" : "Dislike"
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
          lineNumber: 141,
          columnNumber: 9
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
      lineNumber: 113,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { "aria-live": "polite", className: "min-h-0", children: toast && /* @__PURE__ */ jsxDEV("span", { className: "inline-block text-sm text-gray-200 bg-gray-700/60 px-2 py-1 rounded", children: toast }, void 0, false, {
      fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
      lineNumber: 157,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
      lineNumber: 155,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx",
    lineNumber: 112,
    columnNumber: 5
  }, this);
};
_s(MovieActions, "7h5doArX8gjPrZFxc0FXLjR5DSw=");
_c = MovieActions;
export default MovieActions;
var _c;
$RefreshReg$(_c, "MovieActions");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Users/marti/Development/Projects/film-recommendations-ai-martin/filmrecommendations-react-frontend/src/components/MovieDetails/MovieActions.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QyxhQUFBRCxJQUFBIiwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlU3RhdGUiLCJTVE9SQUdFX0tFWV9QUkVGSVgiLCJNb3ZpZUFjdGlvbnMiLCJtb3ZpZSIsIm9uV2F0Y2hUcmFpbGVyIiwib25MaWtlIiwib25EaXNsaWtlIiwiX3MiLCJzdG9yYWdlS2V5IiwiaWQiLCJmZWVkYmFjayIsInNldEZlZWRiYWNrIiwidG9hc3QiLCJzZXRUb2FzdCIsInNhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBlcnNpc3QiLCJ2YWx1ZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwic2hvd1RvYXN0IiwibWVzc2FnZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJoYW5kbGVMaWtlIiwiaGFuZGxlRGlzbGlrZSIsImxpa2VDbGFzc2VzIiwiZGlzbGlrZUNsYXNzZXMiLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJNb3ZpZUFjdGlvbnMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgdHlwZSB7IE1vdmllIH0gZnJvbSAnLi4vLi4vdHlwZXMvbW92aWUudHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIE1vdmllQWN0aW9uc1Byb3BzIHtcclxuICBtb3ZpZTogTW92aWU7XHJcbiAgb25XYXRjaFRyYWlsZXI/OiAoKSA9PiB2b2lkO1xyXG4gIG9uQWRkVG9XYXRjaGxpc3Q/OiAoKSA9PiB2b2lkO1xyXG4gIG9uTGlrZT86ICgpID0+IHZvaWQ7XHJcbiAgb25EaXNsaWtlPzogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuY29uc3QgU1RPUkFHRV9LRVlfUFJFRklYID0gJ21vdmllX2ZlZWRiYWNrXyc7XHJcblxyXG50eXBlIEZlZWRiYWNrU3RhdGUgPSAnbGlrZScgfCAnZGlzbGlrZScgfCBudWxsO1xyXG5cclxuY29uc3QgTW92aWVBY3Rpb25zOiBSZWFjdC5GQzxNb3ZpZUFjdGlvbnNQcm9wcz4gPSAoeyBcclxuICBtb3ZpZSxcclxuICBvbldhdGNoVHJhaWxlcixcclxuICAvLyBvbkFkZFRvV2F0Y2hsaXN0LFxyXG4gIG9uTGlrZSxcclxuICBvbkRpc2xpa2UgXHJcbn0pID0+IHtcclxuICBjb25zdCBzdG9yYWdlS2V5ID0gdXNlTWVtbygoKSA9PiBgJHtTVE9SQUdFX0tFWV9QUkVGSVh9JHttb3ZpZT8uaWQgPz8gJ3Vua25vd24nfWAsIFttb3ZpZT8uaWRdKTtcclxuICBjb25zdCBbZmVlZGJhY2ssIHNldEZlZWRiYWNrXSA9IHVzZVN0YXRlPEZlZWRiYWNrU3RhdGU+KG51bGwpO1xyXG4gIGNvbnN0IFt0b2FzdCwgc2V0VG9hc3RdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIC8vIExvYWQgcGVyc2lzdGVkIGZlZWRiYWNrXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XHJcbiAgICAgIGlmIChzYXZlZCA9PT0gJ2xpa2UnIHx8IHNhdmVkID09PSAnZGlzbGlrZScpIHtcclxuICAgICAgICBzZXRGZWVkYmFjayhzYXZlZCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBpZ25vcmUgc3RvcmFnZSBlcnJvcnNcclxuICAgIH1cclxuICB9LCBbc3RvcmFnZUtleV0pO1xyXG5cclxuICBjb25zdCBwZXJzaXN0ID0gKHZhbHVlOiBGZWVkYmFja1N0YXRlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodmFsdWUpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIHZhbHVlKTtcclxuICAgICAgZWxzZSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShzdG9yYWdlS2V5KTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBpZ25vcmUgc3RvcmFnZSBlcnJvcnNcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBzaG93VG9hc3QgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB7XHJcbiAgICBzZXRUb2FzdChtZXNzYWdlKTtcclxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHNldFRvYXN0KG51bGwpLCAxNjAwKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVMaWtlID0gKCkgPT4ge1xyXG4gICAgLy8gVG9nZ2xlIGJlaGF2aW9yOyBtdXR1YWxseSBleGNsdXNpdmUgd2l0aCBkaXNsaWtlXHJcbiAgICBpZiAoZmVlZGJhY2sgPT09ICdsaWtlJykge1xyXG4gICAgICBzZXRGZWVkYmFjayhudWxsKTtcclxuICAgICAgcGVyc2lzdChudWxsKTtcclxuICAgICAgc2hvd1RvYXN0KCdSZW1vdmVkIGxpa2UnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc2V0RmVlZGJhY2soJ2xpa2UnKTtcclxuICAgIHBlcnNpc3QoJ2xpa2UnKTtcclxuICAgIHNob3dUb2FzdCgnTGlrZWQnKTtcclxuICAgIG9uTGlrZT8uKCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRGlzbGlrZSA9ICgpID0+IHtcclxuICAgIGlmIChmZWVkYmFjayA9PT0gJ2Rpc2xpa2UnKSB7XHJcbiAgICAgIHNldEZlZWRiYWNrKG51bGwpO1xyXG4gICAgICBwZXJzaXN0KG51bGwpO1xyXG4gICAgICBzaG93VG9hc3QoJ1JlbW92ZWQgZGlzbGlrZScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBzZXRGZWVkYmFjaygnZGlzbGlrZScpO1xyXG4gICAgcGVyc2lzdCgnZGlzbGlrZScpO1xyXG4gICAgc2hvd1RvYXN0KCdEaXNsaWtlZCcpO1xyXG4gICAgb25EaXNsaWtlPy4oKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBsaWtlQ2xhc3NlcyA9IGBmb250LXNlbWlib2xkIHB5LTIgcHgtNCBib3JkZXIgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciAke1xyXG4gICAgZmVlZGJhY2sgPT09ICdsaWtlJ1xyXG4gICAgICA/ICdiZy1ncmVlbi02MDAgYm9yZGVyLWdyZWVuLTYwMCB0ZXh0LXdoaXRlJ1xyXG4gICAgICA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItZ3JlZW4tNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctZ3JlZW4tNzAwIGhvdmVyOnRleHQtd2hpdGUgaG92ZXI6Ym9yZGVyLXRyYW5zcGFyZW50J1xyXG4gIH1gO1xyXG5cclxuICBjb25zdCBkaXNsaWtlQ2xhc3NlcyA9IGBmb250LXNlbWlib2xkIHB5LTIgcHgtNCBib3JkZXIgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciAke1xyXG4gICAgZmVlZGJhY2sgPT09ICdkaXNsaWtlJ1xyXG4gICAgICA/ICdiZy1yZWQtNjAwIGJvcmRlci1yZWQtNjAwIHRleHQtd2hpdGUnXHJcbiAgICAgIDogJ2JnLXRyYW5zcGFyZW50IGJvcmRlci1yZWQtNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctcmVkLTcwMCBob3Zlcjp0ZXh0LXdoaXRlIGhvdmVyOmJvcmRlci10cmFuc3BhcmVudCdcclxuICB9YDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMiBtYi0yXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cclxuICAgICAgICB7LyogVHJhaWxlciBCdXR0b24gKi99XHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgIG9uQ2xpY2s9e29uV2F0Y2hUcmFpbGVyfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYmctdHJhbnNwYXJlbnQgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIGhvdmVyOnRleHQtd2hpdGUgcHktMiBweC00IGJvcmRlciBib3JkZXItYmx1ZS02MDAgaG92ZXI6Ym9yZGVyLXRyYW5zcGFyZW50IHJvdW5kZWQgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwidy00IGgtNCBtZS0yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cclxuICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6TTkuNTU1IDcuMTY4QTEgMSAwIDAwOCA4djRhMSAxIDAgMDAxLjU1NS44MzJsMy0yYTEgMSAwIDAwMC0xLjY2NGwtMy0yelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICBUcmFpbGVyXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgey8qIExpa2UgQnV0dG9uICovfVxyXG4gICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVMaWtlfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtsaWtlQ2xhc3Nlc31cclxuICAgICAgICAgIGFyaWEtcHJlc3NlZD17ZmVlZGJhY2sgPT09ICdsaWtlJ31cclxuICAgICAgICAgIHRpdGxlPXtmZWVkYmFjayA9PT0gJ2xpa2UnID8gJ1lvdSBsaWtlZCB0aGlzJyA6ICdMaWtlIHRoaXMgbW92aWUnfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cInctNCBoLTQgbWUtMlwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMiAxMC41YTEuNSAxLjUgMCAxMTMgMHY2YTEuNSAxLjUgMCAwMS0zIDB2LTZ6TTYgMTAuMzMzdjUuNDNhMiAyIDAgMDAxLjEwNiAxLjc5bC4wNS4wMjVBNCA0IDAgMDA4Ljk0MyAxOGg1LjQxNmEyIDIgMCAwMDEuOTYyLTEuNjA4bDEuMi02QTIgMiAwIDAwMTUuNTYgOEgxMlY0YTIgMiAwIDAwLTItMiAxIDEgMCAwMC0xIDF2LjY2N2E0IDQgMCAwMS0uOCAyLjRMNi44IDcuOTMzYTQgNCAwIDAwLS44IDIuNHpcIiAvPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICB7ZmVlZGJhY2sgPT09ICdsaWtlJyA/ICdMaWtlZCcgOiAnTGlrZSd9XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIHsvKiBEaXNsaWtlIEJ1dHRvbiAqL31cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlRGlzbGlrZX1cclxuICAgICAgICAgIGNsYXNzTmFtZT17ZGlzbGlrZUNsYXNzZXN9XHJcbiAgICAgICAgICBhcmlhLXByZXNzZWQ9e2ZlZWRiYWNrID09PSAnZGlzbGlrZSd9XHJcbiAgICAgICAgICB0aXRsZT17ZmVlZGJhY2sgPT09ICdkaXNsaWtlJyA/ICdZb3UgZGlzbGlrZWQgdGhpcycgOiAnRGlzbGlrZSB0aGlzIG1vdmllJ31cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJ3LTQgaC00IG1lLTJcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxyXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTE4IDkuNWExLjUgMS41IDAgMTEtMyAwdi02YTEuNSAxLjUgMCAwMTMgMHY2ek0xNCA5LjY2N3YtNS40M2EyIDIgMCAwMC0xLjEwNS0xLjc5bC0uMDUtLjAyNUE0IDQgMCAwMDExLjA1NSAySDUuNjRhMiAyIDAgMDAtMS45NjIgMS42MDhsLTEuMiA2QTIgMiAwIDAwNC40NCAxMkg4djRhMiAyIDAgMDAyIDIgMSAxIDAgMDAxLTF2LS42NjdhNCA0IDAgMDEuOC0yLjRsMS40LTEuODY2YTQgNCAwIDAwLjgtMi40elwiIC8+XHJcbiAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgIHtmZWVkYmFjayA9PT0gJ2Rpc2xpa2UnID8gJ0Rpc2xpa2VkJyA6ICdEaXNsaWtlJ31cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7LyogTGlnaHR3ZWlnaHQgdG9hc3QvZmVlZGJhY2sgbWVzc2FnZSAqL31cclxuICAgICAgPGRpdiBhcmlhLWxpdmU9XCJwb2xpdGVcIiBjbGFzc05hbWU9XCJtaW4taC0wXCI+XHJcbiAgICAgICAge3RvYXN0ICYmIChcclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1ibG9jayB0ZXh0LXNtIHRleHQtZ3JheS0yMDAgYmctZ3JheS03MDAvNjAgcHgtMiBweS0xIHJvdW5kZWRcIj5cclxuICAgICAgICAgICAge3RvYXN0fVxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vdmllQWN0aW9uczsiXSwiZmlsZSI6IkM6L1VzZXJzL21hcnRpL0RldmVsb3BtZW50L1Byb2plY3RzL2ZpbG0tcmVjb21tZW5kYXRpb25zLWFpLW1hcnRpbi9maWxtcmVjb21tZW5kYXRpb25zLXJlYWN0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL01vdmllRGV0YWlscy9Nb3ZpZUFjdGlvbnMudHN4In0=